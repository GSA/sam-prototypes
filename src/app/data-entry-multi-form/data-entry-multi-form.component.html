<div tabindex="-1" class="usa-sr-only" aria-hidden="true" #scrollAnchor></div>
<data-entry-subheader title="FSRS New Report">
  <button class="usa-button usa-button--secondary">Discard Draft</button>
  <button class="usa-button" (click)="onReviewAndSubmit()" [disabled]="true">Review & Submit</button>
</data-entry-subheader>

<main>
  <div class="sds-page margin-top-2">
    <div class="grid-container grid-row grid-gap">
      <div class="desktop:grid-col-4 tablet-lg:grid-col-12 mobile-lg:grid-col-12 margin-bottom-3">
        <div class="sds-card">
          <div class="sds-card__body sds-card__body--accent-cool">
            <sds-selection-panel 
            [model]="_selectionPanelModel"
            [currentSelection]="_selectionPanelModel.navigationLinks[_currentStepIndex]"
            (panelSelected)="onPanelChange($event)">
            </sds-selection-panel>
          </div>
        </div>
      </div>
      <div class="desktop:grid-col-8 tablet-lg:grid-col-12 mobile-lg:grid-col-12">
        <div class="padding-bottom-3">
          <h1>
            {{ _currentStep.label }}
          </h1>
          <hr />
        </div>
        <formly-form class="grid-col-8 padding-right-2" 
          [model]="_currentStep.model ? _currentStep.model : model" 
          [fields]="fields"
          [options]="_currentStep.options">
        </formly-form>
      </div>
    </div>
  </div>
</main>

<div class="grid-container grid-row grid-gap">
  <div class="sds-button-row margin-top-0">
    <div class="margin-right-2" *ngIf="_currentStepIndex > 0">
      <button class="usa-button sds-button--circle" 
        (click)="onPanelChange(_selectionPanelModel.navigationLinks[_currentStepIndex - 1])">
        <sds-icon [icon]="'chevron-left'"></sds-icon>
      </button>
      <p>Back - <span class="display-block">{{_selectionPanelModel.navigationLinks[_currentStepIndex - 1].text}}</span></p>
    </div>
    <div class="margin-right-2">
      <button class="usa-button sds-button--circle" (click)="closeback();">
        <sds-icon [icon]="'x'"></sds-icon>
      </button>
      <p class="text-right"> Close</p>
    </div>
    <div class="margin-right-2">
      <button class="usa-button sds-button--circle">
        <sds-icon [icon]="'question'"></sds-icon>
      </button>
      <p class="text-right">Help</p>
    </div>
    <div class="margin-right-2" (click)="onSaveClicked()">
      <button class="usa-button sds-button--circle">
        <sds-icon [icon]="'save'"></sds-icon>
      </button>
      <p class="text-right">Save</p>
    </div>
    <div class="margin-right-2" *ngIf="_currentStepIndex != dataEntryForm.steps.length - 1">
      <button cdkStepperNext class="usa-button sds-button--circle"
        (click)="onPanelChange(_selectionPanelModel.navigationLinks[_currentStepIndex + 1])"
      >
        <sds-icon [icon]="'chevron-right'"></sds-icon>
      </button>
      <p class="text-left">
        Next - <span class="display-block">{{_selectionPanelModel.navigationLinks[_currentStepIndex + 1].text}}</span>
      </p>
    </div>
  </div>
</div>